<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Soobi Runner</title>
  <style>
    * { margin: 0; padding: 0; }
    body { text-align: center; background: white; font-family: sans-serif; }
    canvas { background: white; display: block; margin: 20px auto; border: 1px solid #ddd; }
    #score { font-size: 20px; margin: 10px; color: black; }
    #message { font-size: 24px; font-weight: bold; color: black; display: none; }
  </style>
</head>
<body>
  <h1 style="color:black;">Soobi Runner</h1>
  <canvas id="gameCanvas" width="800" height="200"></canvas>
  <div id="score">Treats: 0</div>
  <div id="message">Happy Birthday SOOBI!</div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Game settings: tuned for smooth gameplay
    let treatCount = 0;
    let gameOver = false;
    const gravity = 0.8;
    const groundY = 150;
    const speed = 6;

    // Soobi: represented as a black rectangle (silhouette)
    const soobi = {
      x: 50,
      y: groundY - 40,
      width: 40,
      height: 40,
      velocityY: 0,
      jumping: false
    };

    // Arrays for obstacles and treats
    let obstacles = [];
    let treats = [];

    // Spawn an obstacle (black block resembling a cactus)
    function spawnObstacle() {
      const obs = {
        x: canvas.width,
        y: groundY - 20, // placed on the ground
        width: 20,
        height: 20
      };
      obstacles.push(obs);
    }

    // Spawn a treat: a üçó chicken leg piece using the emoji.
    function spawnTreat() {
      const treat = {
        x: canvas.width,
        y: groundY - 30,
        size: 24  // emoji drawn with 24px font size
      };
      treats.push(treat);
    }

    // Spawning intervals: adjust as desired for gameplay pacing.
    setInterval(() => { if (!gameOver) spawnObstacle(); }, 2000);
    setInterval(() => { if (!gameOver) spawnTreat(); }, 2500);

    // Jump function: triggers on SPACE key, touch, or click.
    function jump() {
      if (!soobi.jumping) {
        soobi.velocityY = -15;
        soobi.jumping = true;
      }
    }

    // Listen for controls (keyboard, touch, click)
    document.addEventListener("keydown", (e) => { if (e.code === "Space") jump(); });
    document.addEventListener("touchstart", jump);
    document.addEventListener("click", jump);

    // Update game objects and physics
    function update() {
      if (gameOver) return;

      // Update Soobi's position with gravity physics
      soobi.y += soobi.velocityY;
      soobi.velocityY += gravity;
      if (soobi.y >= groundY - soobi.height) {
        soobi.y = groundY - soobi.height;
        soobi.jumping = false;
      }

      // Move obstacles and check collisions
      for (let i = obstacles.length - 1; i >= 0; i--) {
        const obs = obstacles[i];
        obs.x -= speed;
        // Collision detection (simple AABB)
        if (
          soobi.x < obs.x + obs.width &&
          soobi.x + soobi.width > obs.x &&
          soobi.y < obs.y + obs.height &&
          soobi.y + soobi.height > obs.y
        ) {
          gameOver = true;
          alert("Game Over!");
          location.reload();
        }
        if (obs.x + obs.width < 0) obstacles.splice(i, 1);
      }

      // Move treats and check for collection
      for (let i = treats.length - 1; i >= 0; i--) {
        const treat = treats[i];
        treat.x -= speed;
        if (
          soobi.x < treat.x + treat.size &&
          soobi.x + soobi.width > treat.x &&
          soobi.y < treat.y + treat.size &&
          soobi.y + soobi.height > treat.y
        ) {
          treatCount++;
          document.getElementById("score").textContent = "Treats: " + treatCount;
          treats.splice(i, 1);
          if (treatCount >= 50) {
            document.getElementById("message").style.display = "block";
          }
        }
        if (treat.x + treat.size < 0) treats.splice(i, 1);
      }
    }

    // Draw the game objects on the canvas
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw the ground line
      ctx.beginPath();
      ctx.moveTo(0, groundY);
      ctx.lineTo(canvas.width, groundY);
      ctx.strokeStyle = "black";
      ctx.stroke();

      // Draw Soobi (the dog)
      ctx.fillStyle = "black";
      ctx.fillRect(soobi.x, soobi.y, soobi.width, soobi.height);

      // Draw obstacles
      ctx.fillStyle = "black";
      obstacles.forEach(obs => {
        ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
      });

      // Draw treats as the üçó emoji
      ctx.textAlign = "center";
      ctx.textBaseline = "middle";
      ctx.font = "24px sans-serif";
      treats.forEach(treat => {
        ctx.fillText("üçó", treat.x + treat.size / 2, treat.y + treat.size / 2);
      });
    }

    // The game loop, using requestAnimationFrame for smooth animation
    function gameLoop() {
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    // Start the game loop
    gameLoop();
  </script>
</body>
</html>
